mutation CreateOrder(
  $stripeCheckoutId: String!
  $total: Int!
  $email: String!
  $orderItems: [OrderItemCreateInput!]
  $orderStatus: OrderStatus!
) {
  createOrder(
    data: {
      stripeCheckoutId: $stripeCheckoutId
      total: $total
      account: { connect: { email: $email } }
      orderItems: { create: $orderItems }
      orderStatus: $orderStatus
    }
  ) {
    id
    stripeCheckoutId
    orderStatus
    orderItems {
      quantity
      product {
        slug
        name
        price
        images(first: 1) {
          url
        }
      }
    }
  }
}

mutation UpdateOrder($id: ID!, $orderStatus: OrderStatus!) {
  updateOrder(where: { id: $id }, data: { orderStatus: $orderStatus }) {
    stripeCheckoutId
    orderStatus
  }
}
